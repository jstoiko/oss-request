@*
 * Copyright (c) Salesforce.com, inc. 2017
 *@

@this()

@(task: models.Task)

@import play.api.libs.json._

@task.state

@task.completableByType

@task.completableByValue

@formWithData(form: JsObject) = @{
    val dataBody = task.data.getOrElse(Json.obj())
    val data = Json.obj("data" -> dataBody)
    val view = Json.obj("view" -> "bootstrap-display")
    form ++ data ++ view
}

@for(form <- task.prototype.form) {
    <div id="form-@task.id"></div>
    <script>
        (function() {
            const form = @Html(formWithData(form).toString);
            $("#form-@task.id").alpaca(form);
        })();
    </script>
}

